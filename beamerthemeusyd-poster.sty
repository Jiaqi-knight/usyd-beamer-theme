\ProvidesPackage{beamerthemeusyd-poster}  % this style was created by Malcolm Ramsay

\selectcolormodel{cmyk}
\RequirePackage{tcolorbox}
\RequirePackage{etoolbox}

\tcbuselibrary{raster, skins}

\mode<presentation>

\usecolortheme{usyd}
\usefonttheme{usyd}

% Define default logo
\gdef\USYD@logo{USYDLogo}

% Default left and right poster logos
\xdef\poster@logoleft{}
\xdef\poster@logoright{\USYD@logo}

% The logo defined with \logo is by default placed on the right.
\def\logo#1{\gdef\poster@logoright{#1}}

% commands to define custom left and right logos
\def\logoleft#1{\gdef\poster@logoleft{#1}}
\def\logoright#1{\gdef\poster@logoright{#1}}

\setbeamertemplate{navigation symbols}{}  % no navigation on a poster

%% Define block for text in poster

\defbeamertemplate*{block begin}{bordered}{%
  \tcbset{colframe=usydred,boxsep=0.3em,boxrule=0.2em,sharp corners,colback=usydwhite,fonttitle=\bfseries}
  \begin{tcolorbox}[title=\insertblocktitle]
}

\defbeamertemplate*{block end}{borderd}{%
  \end{tcolorbox}
  \vspace{1em}
}


%% Define the headline of the poster

\setbeamertemplate{headline}{%
  \begin{beamercolorbox}[wd=\paperwidth]{headline}
    \begin{tcbraster}[raster equal height, raster columns=5, width=\pagewidth, raster halign=center,
      opacityback=0, opacityframe=0]
      \begin{tcolorbox}[valign=center]
        \ifdefempty{\poster@logoleft}{}{\includegraphics{\poster@logoleft}}
      \end{tcolorbox}
      \begin{tcolorbox}[raster multicolumn=3]
        \vspace{2.5em}
        \begin{center}
          \usebeamercolor{title in headline}{\color{fg}\textbf{\LARGE{\inserttitle}}\\[2em]}
          \usebeamercolor{author in headline}{\color{fg}\large{\insertauthor}\\[0.5em]}
          \usebeamercolor{institute in headline}{\color{fg}\large{\insertinstitute}\\[0.5em]}
        \end{center}
        \vspace{1em}
      \end{tcolorbox}
      \begin{tcolorbox}[valign=center]
        \includegraphics[]{\USYD@logo}
    \end{tcolorbox}
    \end{tcbraster}
  \end{beamercolorbox}

  \begin{beamercolorbox}[wd=\paperwidth]{lower separation line head}
  \end{beamercolorbox}
}


%% The bottom line of the poster

\setbeamertemplate{footline}{
  \leavevmode%
  \begin{beamercolorbox}[ht=4ex,leftskip=1em,rightskip=1em]{author in head/foot}%
    \hfill
    \vskip1ex
  \end{beamercolorbox}
  \vskip0pt%
  \begin{beamercolorbox}[wd=\paperwidth]{lower separation line foot}
  \end{beamercolorbox}
}

\mode<all>

% Use numbered bibliography labels instead of image
\setbeamertemplate{bibliography item}{\insertbiblabel}
